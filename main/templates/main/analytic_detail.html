{% extends 'main/layout.html' %}

{% block title %}Analytics for {{ post.title }} — {{ request.user.username }} at Mataroa{% endblock %}

{% block content %}
<main>
    <h1>{{ post.title }}</h1>

    <a href="{% url 'analytic_list' %}">« all post analytics</a>

    <h2>Post analytics since {{ post.created_at.date }}</h2>
    <p>
        Note: visits from your logged in user do not get recorded.
    </p>

    <div class="analytics-chart">
        <svg version="1.1" viewBox="0 0 500 100" xmlns="http://www.w3.org/2000/svg">
            {% for day, analytic in post_analytics.items %}
            <rect
                x="{{ analytic.x_offset }}"
                y="{{ analytic.negative_count_percent }}%"
                width="18"
                height="{{ analytic.count_percent }}%"
                >
                <title>{{ analytic.count }} hits during {{ day|date:'F j, Y' }}</title>
            </rect>
            {% endfor %}
        </svg>
    </div>

</main>
{% endblock %}
