{% extends 'main/layout.html' %}

{% block title %}{{ post.title}} — {{ blog_title }}{% endblock %}

{% block meta_description %}{{ post.body|truncatewords:16 }}{% endblock %}

{% block content %}
<main>
    {% if blog_title %}
    <a href="{% url 'index' %}" class="posts-item-brand">{{ blog_title }}</a>
    {% endif %}

    <article itemscope itemtype="http://schema.org/BlogPosting">
        <h1 class="posts-item-title" itemprop="name headline">
            {{ post.title }}
        </h1>

        <div class="posts-item-byline">
            Published on <time datetime="{{ post.created_at|date:'F j, Y' }}" itemprop="datePublished">{{ post.created_at|date:'F j, Y' }}</time>
            {% if request.user.is_authenticated and request.subdomain %}
            | <a href="{% url 'post_update' post.slug %}">Edit post</a>
            | <a href="{% url 'post_delete' post.slug %}">Del</a>
            {% endif %}
        </div>

        <div itemprop="articleBody">
            {{ post.as_markdown|safe }}
        </div>
    </article>

    <br>
    <a href="{% url 'index' %}">← archive</a>
</main>
{% endblock %}

{% block scripts %}
<script>
    window.addEventListener('keypress', function (evt) {
        if (evt.key === 'u') {
            let url = '/';
            document.location.assign(url);
        }
    });
</script>
{% endblock %}
